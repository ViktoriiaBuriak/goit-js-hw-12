{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const galleryBox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n    enableKeyboard: true,\n  });\n\n  const galleryApiUrl = 'https://pixabay.com/api/';\n  const form = document.querySelector('.search-container');\n  const input = document.getElementById('search');\n  const loader = document.querySelector('.loader');\n  const gallery = document.querySelector('.gallery');\n  const loadButton = document.querySelector('.load-btn');\n  gallery.insertAdjacentElement('afterend', loadButton);\n  let currentPage = 1;\n  let currentSearch = '';\n\n  loadButton.style.display = 'none';\n\n    async function fetchData(searchValue, page) {\n      try {\n        const response = await axios.get(galleryApiUrl, {\n          params: {\n            key: '42070599-a2d44ee2a419d1b7eaf44145e',\n            q: encodeURIComponent(searchValue),\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: page,\n            per_page: 15,\n          },\n        });\n\n        return response.data;\n      } catch (error) {\n        console.error('There was a problem with the fetch operation:', error);\n      }\n    }\n\n    async function addGallery(searchValue, page) {\n      loader.style.display = 'block';\n\n      const data = await fetchData(searchValue, page);\n\n      if (!data || data.hits.length === 0) {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n        loader.style.display = 'none';\n        input.value = '';\n        return;\n      }\n\n      if (page === 1) {\n        gallery.innerHTML = '';\n      }\n      addImagesToGallery(data.hits);\n\n      loader.style.display = 'none';\n      loadButton.style.display = 'block';\n\n      const totalHits = data.totalHits || 0;\n      if (page * 15 >= totalHits) {\n        loadButton.style.display = 'none';\n        iziToast.info({\n          title: 'End of Results',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n        });\n        input.value = '';\n      }\n\n      galleryBox.refresh();\n\n      window.scrollTo({\n        top: gallery.offsetTop + gallery.offsetHeight,\n        behavior: 'smooth',\n      });\n    }\n\n    function addImagesToGallery(hits) {\n      hits.forEach(hit => {\n        const listItem = document.createElement('li');\n        listItem.classList.add('gallery-item');\n\n        const elementLink = document.createElement('a');\n        elementLink.classList.add('gallery-link');\n        elementLink.href = hit.largeImageURL;\n\n        const imageElement = document.createElement('img');\n        imageElement.classList.add('gallery-image');\n        imageElement.src = hit.webformatURL;\n        imageElement.alt = hit.tags;\n\n        const captionList = document.createElement('ul');\n        captionList.classList.add('caption-list');\n\n        const likesItem = document.createElement('li');\n        likesItem.innerHTML = '<strong>Likes:</strong> <br>' + hit.likes;\n\n        const viewsItem = document.createElement('li');\n        viewsItem.innerHTML = '<strong>Views:</strong> <br>' + hit.views;\n\n        const commentsItem = document.createElement('li');\n        commentsItem.innerHTML = '<strong>Comments:</strong> <br>' + hit.comments;\n\n        const downloadsItem = document.createElement('li');\n        downloadsItem.innerHTML =\n          '<strong>Downloads:</strong> <br>' + hit.downloads;\n\n        captionList.appendChild(likesItem);\n        captionList.appendChild(viewsItem);\n        captionList.appendChild(commentsItem);\n        captionList.appendChild(downloadsItem);\n\n        listItem.appendChild(elementLink);\n        elementLink.appendChild(imageElement);\n        listItem.appendChild(captionList);\n\n        gallery.appendChild(listItem);\n      });\n    }\n\n    form.addEventListener('submit', evt => {\n      evt.preventDefault();\n\n      const inputValue = input.value.trim().toLowerCase();\n\n      if (inputValue !== '') {\n        currentSearch = inputValue;\n        currentPage = 1;\n\n        addGallery(inputValue, currentPage);\n      } else {\n        input.reportValidity();\n      }\n    });\n\n    loadButton.addEventListener('click', () => {\n      loader.style.display = 'block';\n      currentPage++;\n      addGallery(currentSearch, currentPage);\n    });\n  });\n\n  "],"names":["galleryBox","SimpleLightbox","galleryApiUrl","form","input","loader","gallery","loadButton","currentPage","currentSearch","fetchData","searchValue","page","axios","error","addGallery","data","iziToast","addImagesToGallery","totalHits","hits","hit","listItem","elementLink","imageElement","captionList","likesItem","viewsItem","commentsItem","downloadsItem","evt","inputValue"],"mappings":"owBAOA,SAAS,iBAAiB,mBAAoB,UAAY,CACxD,MAAMA,EAAa,IAAIC,EAAe,aAAc,CAClD,aAAc,MACd,gBAAiB,SACjB,aAAc,IACd,eAAgB,EACpB,CAAG,EAEKC,EAAgB,2BAChBC,EAAO,SAAS,cAAc,mBAAmB,EACjDC,EAAQ,SAAS,eAAe,QAAQ,EACxCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAa,SAAS,cAAc,WAAW,EACrDD,EAAQ,sBAAsB,WAAYC,CAAU,EACpD,IAAIC,EAAc,EACdC,EAAgB,GAEpBF,EAAW,MAAM,QAAU,OAEzB,eAAeG,EAAUC,EAAaC,EAAM,CAC1C,GAAI,CAaF,OAZiB,MAAMC,EAAM,IAAIX,EAAe,CAC9C,OAAQ,CACN,IAAK,qCACL,EAAG,mBAAmBS,CAAW,EACjC,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACX,CAAS,GAEe,IACjB,OAAQE,EAAP,CACA,QAAQ,MAAM,gDAAiDA,CAAK,CACrE,CACF,CAED,eAAeC,EAAWJ,EAAaC,EAAM,CAC3CP,EAAO,MAAM,QAAU,QAEvB,MAAMW,EAAO,MAAMN,EAAUC,EAAaC,CAAI,EAE9C,GAAI,CAACI,GAAQA,EAAK,KAAK,SAAW,EAAG,CACnCC,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,UACpB,CAAS,EACDZ,EAAO,MAAM,QAAU,OACvBD,EAAM,MAAQ,GACd,MACD,CAEGQ,IAAS,IACXN,EAAQ,UAAY,IAEtBY,EAAmBF,EAAK,IAAI,EAE5BX,EAAO,MAAM,QAAU,OACvBE,EAAW,MAAM,QAAU,QAE3B,MAAMY,EAAYH,EAAK,WAAa,EAChCJ,EAAO,IAAMO,IACfZ,EAAW,MAAM,QAAU,OAC3BU,EAAS,KAAK,CACZ,MAAO,iBACP,QAAS,6DACT,SAAU,UACpB,CAAS,EACDb,EAAM,MAAQ,IAGhBJ,EAAW,QAAO,EAElB,OAAO,SAAS,CACd,IAAKM,EAAQ,UAAYA,EAAQ,aACjC,SAAU,QAClB,CAAO,CACF,CAED,SAASY,EAAmBE,EAAM,CAChCA,EAAK,QAAQC,GAAO,CAClB,MAAMC,EAAW,SAAS,cAAc,IAAI,EAC5CA,EAAS,UAAU,IAAI,cAAc,EAErC,MAAMC,EAAc,SAAS,cAAc,GAAG,EAC9CA,EAAY,UAAU,IAAI,cAAc,EACxCA,EAAY,KAAOF,EAAI,cAEvB,MAAMG,EAAe,SAAS,cAAc,KAAK,EACjDA,EAAa,UAAU,IAAI,eAAe,EAC1CA,EAAa,IAAMH,EAAI,aACvBG,EAAa,IAAMH,EAAI,KAEvB,MAAMI,EAAc,SAAS,cAAc,IAAI,EAC/CA,EAAY,UAAU,IAAI,cAAc,EAExC,MAAMC,EAAY,SAAS,cAAc,IAAI,EAC7CA,EAAU,UAAY,+BAAiCL,EAAI,MAE3D,MAAMM,EAAY,SAAS,cAAc,IAAI,EAC7CA,EAAU,UAAY,+BAAiCN,EAAI,MAE3D,MAAMO,EAAe,SAAS,cAAc,IAAI,EAChDA,EAAa,UAAY,kCAAoCP,EAAI,SAEjE,MAAMQ,EAAgB,SAAS,cAAc,IAAI,EACjDA,EAAc,UACZ,mCAAqCR,EAAI,UAE3CI,EAAY,YAAYC,CAAS,EACjCD,EAAY,YAAYE,CAAS,EACjCF,EAAY,YAAYG,CAAY,EACpCH,EAAY,YAAYI,CAAa,EAErCP,EAAS,YAAYC,CAAW,EAChCA,EAAY,YAAYC,CAAY,EACpCF,EAAS,YAAYG,CAAW,EAEhCnB,EAAQ,YAAYgB,CAAQ,CACpC,CAAO,CACF,CAEDnB,EAAK,iBAAiB,SAAU2B,GAAO,CACrCA,EAAI,eAAc,EAElB,MAAMC,EAAa3B,EAAM,MAAM,KAAM,EAAC,YAAW,EAE7C2B,IAAe,IACjBtB,EAAgBsB,EAChBvB,EAAc,EAEdO,EAAWgB,EAAYvB,CAAW,GAElCJ,EAAM,eAAc,CAE5B,CAAK,EAEDG,EAAW,iBAAiB,QAAS,IAAM,CACzCF,EAAO,MAAM,QAAU,QACvBG,IACAO,EAAWN,EAAeD,CAAW,CAC3C,CAAK,CACL,CAAG"}