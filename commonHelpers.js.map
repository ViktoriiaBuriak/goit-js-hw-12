{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport axios from 'axios';\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const galleryBox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n    enableKeyboard: true,\n  });\n\n  const galleryApiUrl = 'https://pixabay.com/api/';\n  const form = document.querySelector('.search-container');\n  const input = document.getElementById('search');\n  const loader = document.querySelector('.loader');\n  const gallery = document.querySelector('.gallery');\n  const loadButton = document.querySelector('.load-btn');\n\n  let page = 1;\n  let limit = 15;\n  let imageData = [];\n  let totalPages = 0;\n  let searchKeyword = '';\n\n  form.addEventListener('submit', async evt => {\n    evt.preventDefault();\n    searchKeyword = input.value.trim().toLowerCase();\n    page = 1;\n    loadButton.style.display = 'none';\n    await loadGallery();\n  });\n\n  loadButton.addEventListener('click', async () => {\n    loader.style.display = 'block';\n    console.log(loader);\n    await loadGallery();\n    page++;\n    loader.style.display = 'none';\n\n    const galleryItems = document.querySelector('.gallery-item');\n    const galleryItemRect = galleryItems.getBoundingClientRect();\n    const galleryItemHeight = galleryItemRect.height + 24;\n\n    window.scrollBy({\n      top: galleryItemHeight * 2,\n      behavior: 'smooth',\n    });\n  });\n\n  async function loadGallery() {\n    loader.style.display = 'block';\n    const inputValue = searchKeyword;\n    if (inputValue !== '') {\n      const params = {\n        key: '42070599-a2d44ee2a419d1b7eaf44145e',\n        q: encodeURIComponent(inputValue),\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: limit,\n        _page: page,\n      };\n      await axios\n        .get(galleryApiUrl, {\n          params: params,\n        })\n        .then(response => {\n          const data = response.data;\n          const hits = data.hits;\n          totalPages = Math.ceil(data.totalHits / limit);\n\n          if (data.hits.length === 0) {\n            input.value = '';\n            iziToast.error({\n              title: 'Error',\n              message:\n                'Sorry, there are no images matching your search query. Please try again!',\n              position: 'topRight',\n            });\n\n            loader.style.display = 'none';\n            return;\n          }\n\n          hits.forEach(hit => {\n            const listItem = document.createElement('li');\n            listItem.classList.add('gallery-item');\n            const elementLink = document.createElement('a');\n            elementLink.classList.add('gallery-link');\n            elementLink.href = hit.largeImageURL;\n            const imageElement = document.createElement('img');\n            imageElement.classList.add('gallery-image');\n            imageElement.src = hit.webformatURL;\n            imageElement.alt = hit.tags;\n            const captionList = document.createElement('ul');\n            captionList.classList.add('caption-list');\n            const likesItem = document.createElement('li');\n            likesItem.innerHTML = '<strong>Likes:</strong> <br>' + hit.likes;\n            const viewsItem = document.createElement('li');\n            viewsItem.innerHTML = '<strong>Views:</strong> <br>' + hit.views;\n            const commentsItem = document.createElement('li');\n            commentsItem.innerHTML =\n              '<strong>Comments:</strong> <br>' + hit.comments;\n            const downloadsItem = document.createElement('li');\n            downloadsItem.innerHTML =\n              '<strong>Downloads:</strong> <br>' + hit.downloads;\n            captionList.appendChild(likesItem);\n            captionList.appendChild(viewsItem);\n            captionList.appendChild(commentsItem);\n            captionList.appendChild(downloadsItem);\n            listItem.appendChild(elementLink);\n            elementLink.appendChild(imageElement);\n            listItem.appendChild(captionList);\n            gallery.appendChild(listItem);\n          });\n\n          if (page === 1) {\n            imageData = hits;\n          } else {\n            imageData.push(...hits);\n          }\n\n          loader.style.display = 'none';\n\n          galleryBox.refresh();\n\n          if (page < totalPages) {\n            loadButton.style.display = 'flex';\n          } else {\n            loadButton.style.display = 'none';\n            input.value = '';\n            iziToast.error({\n              title: 'Error',\n              message: \"You've reached the end of search results.\",\n              position: 'topRight',\n            });\n          }\n        })\n        .catch(error => {\n          console.error('There was a problem with the fetch operation:', error);\n        });\n    } else {\n      input.reportValidity();\n      loader.style.display = 'none';\n    }\n  }\n});\n"],"names":["galleryBox","SimpleLightbox","galleryApiUrl","form","input","loader","gallery","loadButton","page","limit","imageData","totalPages","searchKeyword","evt","loadGallery","galleryItemHeight","inputValue","params","axios","response","data","hits","iziToast","hit","listItem","elementLink","imageElement","captionList","likesItem","viewsItem","commentsItem","downloadsItem","error"],"mappings":"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"}